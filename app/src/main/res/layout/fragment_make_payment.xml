<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/payment_background_gradient">

    <!-- Top App Bar with curved bottom -->
    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/app_bar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/header_gradient_background"
        app:elevation="0dp">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingHorizontal="20dp"
            android:paddingBottom="32dp">

            <com.google.android.material.card.MaterialCardView
                android:id="@+id/cv_back"
                android:layout_width="48dp"
                android:layout_height="48dp"
                app:cardBackgroundColor="#33FFFFFF"
                app:cardCornerRadius="16dp"
                app:cardElevation="0dp"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent">

                <com.airbnb.lottie.LottieAnimationView
                    android:id="@+id/iv_back"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_gravity="center"
                    app:lottie_autoPlay="true"
                    app:lottie_loop="true"
                    android:scaleType="centerCrop"
                    app:lottie_rawRes="@raw/back_button_animation"
                    android:contentDescription="Back" />
            </com.google.android.material.card.MaterialCardView>

            <TextView
                android:id="@+id/tv_screen_title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:fontFamily="@font/poppins_bold"
                android:text="Make Payment"
                android:textColor="#FFFFFF"
                android:textSize="22sp"
                app:layout_constraintBottom_toBottomOf="@id/cv_back"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="@id/cv_back" />


            <!-- Outstanding Amount Pill -->
            <TextView
                android:id="@+id/tv_total_amount"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/payment_amount_pill_background"
                android:fontFamily="@font/poppins_semibold"
                android:paddingHorizontal="16dp"
                android:paddingVertical="8dp"
                android:text="Rs 126,000.00"
                android:textColor="#FFFFFF"
                android:textSize="16sp"
                android:layout_marginTop="16dp"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@id/tv_screen_title" />

        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- Curved bottom shape for AppBar -->
        <View
            android:layout_width="match_parent"
            android:layout_height="24dp"
            android:background="@drawable/curved_bottom_shape" />
    </com.google.android.material.appbar.AppBarLayout>

    <!-- Main Content -->
    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:fillViewport="true"
        android:overScrollMode="never"
        android:paddingBottom="80dp"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingHorizontal="20dp"
            android:paddingTop="16dp"
            android:paddingBottom="80dp">

            <!-- Payment Animation Card -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="200dp"
                app:cardBackgroundColor="#FFFFFF"
                app:cardCornerRadius="24dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:gravity="center">

                    <com.airbnb.lottie.LottieAnimationView
                        android:id="@+id/animation_payment"
                        android:layout_width="150dp"
                        android:layout_height="150dp"
                        app:lottie_autoPlay="true"
                        app:lottie_loop="true"
                        app:lottie_rawRes="@raw/secure_payment" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:fontFamily="@font/poppins_semibold"
                        android:text="Secure Payment Gateway"
                        android:textColor="#333333"
                        android:textSize="16sp" />
                </LinearLayout>
            </androidx.cardview.widget.CardView>

            <!-- Payment Methods Card -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                app:cardBackgroundColor="#FFFFFF"
                app:cardCornerRadius="24dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="20dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:fontFamily="@font/poppins_bold"
                        android:text="Payment Methods"
                        android:textColor="#333333"
                        android:textSize="18sp"
                        android:layout_marginBottom="16dp" />

                    <!-- Payment Methods Tab Layout -->
                    <com.google.android.material.tabs.TabLayout
                        android:id="@+id/tab_payment_methods"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        app:tabMode="fixed"
                        app:tabGravity="fill"
                        app:tabSelectedTextColor="#6A11CB"
                        app:tabTextColor="#757575"
                        app:tabIndicatorColor="#6A11CB"
                        app:tabIndicatorHeight="3dp"
                        app:tabBackground="@android:color/transparent"
                        app:tabTextAppearance="@style/TabTextAppearance">

                        <com.google.android.material.tabs.TabItem
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Card" />

                        <com.google.android.material.tabs.TabItem
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Bank Transfer" />

                        <com.google.android.material.tabs.TabItem
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Digital Wallet" />
                    </com.google.android.material.tabs.TabLayout>

                    <!-- Card Payment Section (initially visible) -->
                    <LinearLayout
                        android:id="@+id/layout_card_payment"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="20dp">

                        <!-- Card Holder Animation with Cards -->
                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="200dp"
                            android:layout_marginBottom="20dp">

                            <!-- Card Carousel -->
                            <androidx.recyclerview.widget.RecyclerView
                                android:id="@+id/recycler_cards"
                                android:layout_width="match_parent"
                                android:layout_height="180dp"
                                android:clipToPadding="false"
                                android:orientation="horizontal"
                                android:paddingStart="20dp"
                                android:paddingEnd="20dp" />
                        </FrameLayout>
                        <com.google.android.material.floatingactionbutton.FloatingActionButton
                            android:id="@+id/fab_add_card"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="bottom|end"
                            android:layout_marginEnd="16dp"
                            android:layout_marginBottom="8dp"
                            android:contentDescription="Add Card"
                            android:src="@drawable/ic_add"
                            app:backgroundTint="#6A11CB"
                            app:tint="#FFFFFF" />
                        <!-- Sample Credit Card Preview -->
                        <androidx.cardview.widget.CardView
                            android:id="@+id/card_preview"
                            android:layout_width="match_parent"
                            android:layout_height="200dp"
                            app:cardCornerRadius="16dp"
                            app:cardElevation="8dp">

                            <FrameLayout
                                android:layout_width="match_parent"
                                android:layout_height="match_parent">

                                <!-- Card Background Gradient -->
                                <View
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    android:background="@drawable/credit_card_gradient" />

                                <!-- Card Chip Image -->
                                <ImageView
                                    android:layout_width="50dp"
                                    android:layout_height="50dp"
                                    android:layout_marginStart="20dp"
                                    android:layout_marginTop="20dp"
                                    android:src="@drawable/ic_card_chip"
                                    android:contentDescription="Card Chip" />

                                <!-- Card Network Logo -->
                                <ImageView
                                    android:layout_width="60dp"
                                    android:layout_height="40dp"
                                    android:layout_gravity="end"
                                    android:layout_marginTop="20dp"
                                    android:layout_marginEnd="20dp"
                                    android:src="@drawable/ic_visa_logo"
                                    android:contentDescription="Card Network" />

                                <!-- Card Number -->
                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="center_horizontal"
                                    android:layout_marginTop="80dp"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="•••• •••• •••• 4586"
                                    android:textColor="#FFFFFF"
                                    android:textSize="18sp" />

                                <!-- Card Holder Name -->
                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="bottom|start"
                                    android:layout_marginStart="20dp"
                                    android:layout_marginBottom="40dp"
                                    android:fontFamily="@font/poppins_regular"
                                    android:text="CARD HOLDER"
                                    android:textColor="#DDFFFFFF"
                                    android:textSize="12sp" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="bottom|start"
                                    android:layout_marginStart="20dp"
                                    android:layout_marginBottom="20dp"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="JOHN SMITH"
                                    android:textColor="#FFFFFF"
                                    android:textSize="14sp" />

                                <!-- Expiry Date -->
                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="bottom|end"
                                    android:layout_marginEnd="20dp"
                                    android:layout_marginBottom="40dp"
                                    android:fontFamily="@font/poppins_regular"
                                    android:text="EXPIRES"
                                    android:textColor="#DDFFFFFF"
                                    android:textSize="12sp" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_gravity="bottom|end"
                                    android:layout_marginEnd="20dp"
                                    android:layout_marginBottom="20dp"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="05/27"
                                    android:textColor="#FFFFFF"
                                    android:textSize="14sp" />
                            </FrameLayout>
                        </androidx.cardview.widget.CardView>

                        <!-- CVV Input -->
                        <com.google.android.material.textfield.TextInputLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="20dp"
                            android:hint="CVV/CVC"
                            app:boxCornerRadiusBottomEnd="12dp"
                            app:boxCornerRadiusBottomStart="12dp"
                            app:boxCornerRadiusTopEnd="12dp"
                            app:boxCornerRadiusTopStart="12dp"
                            app:boxStrokeColor="#6A11CB"
                            app:endIconMode="password_toggle"
                            app:endIconTint="#6A11CB"
                            app:hintTextColor="#6A11CB">

                            <com.google.android.material.textfield.TextInputEditText
                                android:id="@+id/et_cvv"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:fontFamily="@font/poppins_regular"
                                android:inputType="numberPassword"
                                android:maxLength="4"
                                android:textColor="#333333" />
                        </com.google.android.material.textfield.TextInputLayout>

                        <!-- Save Card Checkbox -->
                        <CheckBox
                            android:id="@+id/cb_save_card"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:checked="true"
                            android:fontFamily="@font/poppins_medium"
                            android:text="Save card for future payments"
                            android:textColor="#333333"
                            android:textSize="14sp"
                            app:buttonTint="#6A11CB" />
                    </LinearLayout>

                    <!-- Bank Transfer Section (initially gone) -->
                    <LinearLayout
                        android:id="@+id/layout_bank_transfer"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="20dp"
                        android:visibility="gone">

                        <!-- Bank Transfer Animation -->
                        <com.airbnb.lottie.LottieAnimationView
                            android:id="@+id/animation_bank_transfer"
                            android:layout_width="200dp"
                            android:layout_height="150dp"
                            android:layout_gravity="center_horizontal"
                            app:lottie_autoPlay="true"
                            app:lottie_loop="true"
                            app:lottie_rawRes="@raw/bank_transfer" />

                        <!-- Bank Account Details -->
                        <androidx.cardview.widget.CardView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="16dp"
                            app:cardBackgroundColor="#F5F5F5"
                            app:cardCornerRadius="16dp"
                            app:cardElevation="0dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="Bank Account Details"
                                    android:textColor="#333333"
                                    android:textSize="16sp"
                                    android:layout_marginBottom="8dp" />

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:layout_marginTop="8dp">

                                    <TextView
                                        android:layout_width="120dp"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_regular"
                                        android:text="Bank Name:"
                                        android:textColor="#757575"
                                        android:textSize="14sp" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="National Bank of Education"
                                        android:textColor="#333333"
                                        android:textSize="14sp" />
                                </LinearLayout>

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:layout_marginTop="8dp">

                                    <TextView
                                        android:layout_width="120dp"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_regular"
                                        android:text="Account Name:"
                                        android:textColor="#757575"
                                        android:textSize="14sp" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="Oxford Institute"
                                        android:textColor="#333333"
                                        android:textSize="14sp" />
                                </LinearLayout>

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:layout_marginTop="8dp">

                                    <TextView
                                        android:layout_width="120dp"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_regular"
                                        android:text="Account No.:"
                                        android:textColor="#757575"
                                        android:textSize="14sp" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="0025 7896 4521 3698"
                                        android:textColor="#333333"
                                        android:textSize="14sp" />

                                    <ImageView
                                        android:id="@+id/btn_copy_account"
                                        android:layout_width="24dp"
                                        android:layout_height="24dp"
                                        android:layout_marginStart="8dp"
                                        android:src="@drawable/ic_content_copy"
                                        android:contentDescription="Copy Account Number"
                                        app:tint="#6A11CB" />
                                </LinearLayout>

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:layout_marginTop="8dp">

                                    <TextView
                                        android:layout_width="120dp"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_regular"
                                        android:text="Branch Code:"
                                        android:textColor="#757575"
                                        android:textSize="14sp" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="COL-001"
                                        android:textColor="#333333"
                                        android:textSize="14sp" />
                                </LinearLayout>

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:layout_marginTop="8dp">

                                    <TextView
                                        android:layout_width="120dp"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_regular"
                                        android:text="Reference:"
                                        android:textColor="#757575"
                                        android:textSize="14sp" />

                                    <TextView
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="STU12345-INV02"
                                        android:textColor="#333333"
                                        android:textSize="14sp" />

                                    <ImageView
                                        android:id="@+id/btn_copy_reference"
                                        android:layout_width="24dp"
                                        android:layout_height="24dp"
                                        android:layout_marginStart="8dp"
                                        android:src="@drawable/ic_content_copy"
                                        android:contentDescription="Copy Reference"
                                        app:tint="#6A11CB" />
                                </LinearLayout>
                            </LinearLayout>
                        </androidx.cardview.widget.CardView>

                        <!-- Bank Transfer Instructions -->
                        <androidx.cardview.widget.CardView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="16dp"
                            app:cardBackgroundColor="#E8F5E9"
                            app:cardCornerRadius="16dp"
                            app:cardElevation="0dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:drawablePadding="8dp"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="Important Instructions"
                                    android:textColor="#4CAF50"
                                    android:textSize="16sp" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:fontFamily="@font/poppins_regular"
                                    android:text="• Use your reference number in the transfer description\n• After making the transfer, upload your payment proof\n• Processing may take 1-2 business days"
                                    android:textColor="#333333"
                                    android:textSize="14sp" />
                            </LinearLayout>
                        </androidx.cardview.widget.CardView>
                    </LinearLayout>

                    <!-- Digital Wallet Section (initially gone) -->
                    <LinearLayout
                        android:id="@+id/layout_digital_wallet"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="20dp"
                        android:visibility="gone">

                        <!-- Digital Wallet Animation -->
                        <com.airbnb.lottie.LottieAnimationView
                            android:id="@+id/animation_digital_wallet"
                            android:layout_width="200dp"
                            android:layout_height="150dp"
                            android:layout_gravity="center_horizontal"
                            app:lottie_autoPlay="true"
                            app:lottie_loop="true"
                            app:lottie_rawRes="@raw/digital_wallet" />

                        <!-- Digital Wallet Options -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:layout_marginTop="16dp">

                            <!-- Wallet Option 1 -->
                            <androidx.cardview.widget.CardView
                                android:id="@+id/card_wallet_1"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:cardBackgroundColor="#F5F5F5"
                                app:cardCornerRadius="16dp"
                                app:cardElevation="0dp"
                                android:layout_marginBottom="12dp"
                                android:foreground="?attr/selectableItemBackground"
                                android:clickable="true"
                                android:focusable="true">

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:padding="16dp"
                                    android:gravity="center_vertical">

                                    <ImageView
                                        android:layout_width="48dp"
                                        android:layout_height="48dp"
                                        android:src="@drawable/ic_paypal"
                                        android:contentDescription="PayPal" />

                                    <TextView
                                        android:layout_width="0dp"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="1"
                                        android:layout_marginStart="16dp"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="PayPal"
                                        android:textColor="#333333"
                                        android:textSize="16sp" />

                                    <ImageView
                                        android:layout_width="24dp"
                                        android:layout_height="24dp"
                                        android:src="@drawable/ic_arrow_right"
                                        android:contentDescription="Select"
                                        app:tint="#757575" />
                                </LinearLayout>
                            </androidx.cardview.widget.CardView>

                            <!-- Wallet Option 2 -->
                            <androidx.cardview.widget.CardView
                                android:id="@+id/card_wallet_2"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:cardBackgroundColor="#F5F5F5"
                                app:cardCornerRadius="16dp"
                                app:cardElevation="0dp"
                                android:layout_marginBottom="12dp"
                                android:foreground="?attr/selectableItemBackground"
                                android:clickable="true"
                                android:focusable="true">

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:padding="16dp"
                                    android:gravity="center_vertical">

                                    <ImageView
                                        android:layout_width="48dp"
                                        android:layout_height="48dp"
                                        android:src="@drawable/ic_googl_pay"
                                        android:contentDescription="Google Pay" />

                                    <TextView
                                        android:layout_width="0dp"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="1"
                                        android:layout_marginStart="16dp"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="Google Pay"
                                        android:textColor="#333333"
                                        android:textSize="16sp" />

                                    <ImageView
                                        android:layout_width="24dp"
                                        android:layout_height="24dp"
                                        android:src="@drawable/ic_arrow_right"
                                        android:contentDescription="Select"
                                        app:tint="#757575" />
                                </LinearLayout>
                            </androidx.cardview.widget.CardView>

                            <!-- Wallet Option 3 -->
                            <androidx.cardview.widget.CardView
                                android:id="@+id/card_wallet_3"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:cardBackgroundColor="#F5F5F5"
                                app:cardCornerRadius="16dp"
                                app:cardElevation="0dp"
                                android:foreground="?attr/selectableItemBackground"
                                android:clickable="true"
                                android:focusable="true">

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="horizontal"
                                    android:padding="16dp"
                                    android:gravity="center_vertical">

                                    <ImageView
                                        android:layout_width="48dp"
                                        android:layout_height="48dp"
                                        android:src="@drawable/ic_apple_pay"
                                        android:contentDescription="Apple Pay" />

                                    <TextView
                                        android:layout_width="0dp"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="1"
                                        android:layout_marginStart="16dp"
                                        android:fontFamily="@font/poppins_medium"
                                        android:text="Apple Pay"
                                        android:textColor="#333333"
                                        android:textSize="16sp" />

                                    <ImageView
                                        android:layout_width="24dp"
                                        android:layout_height="24dp"
                                        android:src="@drawable/ic_arrow_right"
                                        android:contentDescription="Select"
                                        app:tint="#757575" />
                                </LinearLayout>
                            </androidx.cardview.widget.CardView>
                        </LinearLayout>

                        <!-- Digital Wallet Instructions -->
                        <androidx.cardview.widget.CardView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="16dp"
                            app:cardBackgroundColor="#E8F5E9"
                            app:cardCornerRadius="16dp"
                            app:cardElevation="0dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:drawablePadding="8dp"
                                    android:fontFamily="@font/poppins_medium"
                                    android:text="Digital Wallet Info"
                                    android:textColor="#4CAF50"
                                    android:textSize="16sp" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:fontFamily="@font/poppins_regular"
                                    android:text="• Transactions typically process instantly\n• Make sure your wallet account is verified\n• Use the same email associated with your student profile"
                                    android:textColor="#333333"
                                    android:textSize="14sp" />
                            </LinearLayout>
                        </androidx.cardview.widget.CardView>
                    </LinearLayout>
                </LinearLayout>
            </androidx.cardview.widget.CardView>

            <!-- Payment Summary Card -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                app:cardBackgroundColor="#FFFFFF"
                app:cardCornerRadius="24dp"
                app:cardElevation="4dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="20dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:fontFamily="@font/poppins_bold"
                        android:text="Payment Summary"
                        android:textColor="#333333"
                        android:textSize="18sp"
                        android:layout_marginBottom="12dp" />

                    <!-- Invoice Details -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_regular"
                            android:text="Invoice Number"
                            android:textColor="#757575"
                            android:textSize="14sp" />

                        <TextView
                            android:id="@+id/tv_invoice_number"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_medium"
                            android:text="INV-2024-02"
                            android:textColor="#333333"
                            android:textSize="14sp" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_regular"
                            android:text="Description"
                            android:textColor="#757575"
                            android:textSize="14sp" />

                        <TextView
                            android:id="@+id/tv_description"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_medium"
                            android:text="Semester Fee"
                            android:textColor="#333333"
                            android:textSize="14sp" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_regular"
                            android:text="Due Date"
                            android:textColor="#757575"
                            android:textSize="14sp" />

                        <TextView
                            android:id="@+id/tv_due_date"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_medium"
                            android:text="May 15, 2025"
                            android:textColor="#FF5722"
                            android:textSize="14sp" />
                    </LinearLayout>

                    <!-- Divider -->
                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:background="#E0E0E0"
                        android:layout_marginVertical="8dp" />

                    <!-- Amount Details -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_regular"
                            android:text="Subtotal"
                            android:textColor="#757575"
                            android:textSize="14sp" />

                        <TextView
                            android:id="@+id/tv_subtotal"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_medium"
                            android:text="Rs 125,000.00"
                            android:textColor="#333333"
                            android:textSize="14sp" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_regular"
                            android:text="Processing Fee"
                            android:textColor="#757575"
                            android:textSize="14sp" />

                        <TextView
                            android:id="@+id/tv_processing_fee"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_medium"
                            android:text="Rs 1,000.00"
                            android:textColor="#333333"
                            android:textSize="14sp" />
                    </LinearLayout>

                    <!-- Divider -->
                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:background="#E0E0E0"
                        android:layout_marginVertical="8dp" />

                    <!-- Total Amount -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:fontFamily="@font/poppins_bold"
                            android:text="Total Amount"
                            android:textColor="#333333"
                            android:textSize="16sp" />

                        <TextView
                            android:id="@+id/tv_total"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="@font/poppins_bold"
                            android:text="Rs 126,000.00"
                            android:textColor="#6A11CB"
                            android:textSize="18sp" />
                    </LinearLayout>
                </LinearLayout>
            </androidx.cardview.widget.CardView>
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

    <!-- Bottom Payment Button -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_gravity="bottom"
        android:background="@drawable/bottom_sheet_background"
        android:padding="20dp">

        <com.google.android.material.button.MaterialButton
            android:id="@+id/btn_proceed"
            android:layout_width="match_parent"
            android:layout_height="56dp"
            android:fontFamily="@font/poppins_semibold"
            android:text="Pay Rs 126,000.00"
            android:textAllCaps="false"
            android:textSize="16sp"
            app:backgroundTint="#6A11CB"
            app:cornerRadius="16dp" />
    </LinearLayout>
</androidx.coordinatorlayout.widget.CoordinatorLayout>